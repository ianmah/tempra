exports.default=function(e,t,n,r){void 0===t&&(t=[{}]),void 0===n&&(n=null),void 0===r&&(r=!1);try{var i=function(r){function i(t){return Promise.resolve(t.createWritable()).then(function(n){var r;function i(e){return r?e:Promise.resolve(n.write(blob)).then(function(){return Promise.resolve(n.close()).then(function(){return t})})}var o=function(){if("stream"in e){var i=e.stream();return Promise.resolve(i.pipeTo(n)).then(function(){return r=1,t})}return function(){if("body"in e)return Promise.resolve(e.body.pipeTo(n)).then(function(){return r=1,t})}()}();return o&&o.then?o.then(i):i(o)})}return n?i(n):Promise.resolve(window.showSaveFilePicker({suggestedName:t[0].fileName,id:t[0].id,startIn:t[0].startIn,types:o,excludeAcceptAllOption:t[0].excludeAcceptAllOption||!1})).then(i)};Array.isArray(t)||(t=[t]),t[0].fileName=t[0].fileName||"Untitled";var o=[];t.forEach(function(t,n){o[n]={description:t.description||"",accept:{}},t.mimeTypes?(0===n&&(e.type?t.mimeTypes.push(e.type):e.headers&&e.headers.get("content-type")&&t.mimeTypes.push(e.headers.get("content-type"))),t.mimeTypes.map(function(e){o[n].accept[e]=t.extensions||[]})):e.type&&(o[n].accept[e.type]=t.extensions||[])});var s=function(){if(n)return function(e,t){try{var r=Promise.resolve(n.getFile()).then(function(){})}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}(0,function(e){if(n=null,r)throw e})}();return Promise.resolve(s&&s.then?s.then(i):i())}catch(e){return Promise.reject(e)}};
